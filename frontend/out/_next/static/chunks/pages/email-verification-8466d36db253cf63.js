(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4772],{7599:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/email-verification",function(){return s(6303)}])},6303:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return m}});var n=s(5893),l=s(7294),i=s(1163),a=s(9008),r=s.n(a),o=s(1664),c=s.n(o),d=s(1491);let u=()=>(0,n.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M15 19.9201L8.47997 13.4001C7.70997 12.6301 7.70997 11.3701 8.47997 10.6001L15 4.08008",stroke:"#2E3642",strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"})});function m(){let[e,t]=(0,l.useState)(["","","",""]),[s,a]=(0,l.useState)(""),[o,m]=(0,l.useState)(""),[x,f]=(0,l.useState)(!1),[p,h]=(0,l.useState)(""),[g,j]=(0,l.useState)(180),b=(0,i.useRouter)(),{verifyEmail:w,resendVerificationCode:v}=(0,d.a)(),y=[(0,l.useRef)(null),(0,l.useRef)(null),(0,l.useRef)(null),(0,l.useRef)(null)];(0,l.useEffect)(()=>{b.isReady&&(b.query.email&&a(b.query.email),b.query.userId&&m(b.query.userId))},[b.isReady,b.query]),(0,l.useEffect)(()=>{document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light")},[]),(0,l.useEffect)(()=>{console.log("Code updated:",e.join(""))},[e]),(0,l.useEffect)(()=>{let e=g>0&&setInterval(()=>j(g-1),1e3);return()=>clearInterval(e)},[g]);let N=(s,n)=>{if(h(""),n.length>1&&(n=n.substring(0,1)),n&&!/^\d+$/.test(n))return;let l=[...e];l[s]=n,t(l),""!==n&&s<3&&y[s+1].current.focus()},k=(t,s)=>{"Backspace"===s.key&&""===e[t]&&t>0&&y[t-1].current.focus()},E=e=>{e.preventDefault();let s=e.clipboardData.getData("text/plain").trim();4===s.length&&/^\d{4}$/.test(s)&&(t(s.split("")),y[3].current.focus())},D=async t=>{t&&t.preventDefault();let s=e.join("");if(4===s.length){f(!0),h("");try{console.log("Submitting verification with:",{userId:o,code:s});let e=await w(o,s);console.log("Verification result:",e),e&&e.success?(localStorage.setItem("newlyVerified","true"),b.push("/verification-success")):(console.error("Verification failed:",e),h("Invalid verification code. Please try again."))}catch(e){console.error("Verification error:",e),h("Invalid verification code. Please try again.")}finally{f(!1)}}},C=async()=>{if(!(g>0))try{if(!o){console.error("User ID is missing. Please try again or go back to login.");return}let e=await v(o);e.success?(t(["","","",""]),j(180),setTimeout(()=>{y[0].current&&y[0].current.focus()},100)):console.error(e.message||"Failed to resend verification code. Please try again.")}catch(e){console.error("Error resending code:",e)}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r(),{children:[(0,n.jsx)("title",{children:"Verify Your Email - tenantli"}),(0,n.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"}),(0,n.jsx)("meta",{name:"theme-color",content:"#FBF5DA"}),(0,n.jsx)("meta",{name:"apple-mobile-web-app-capable",content:"yes"}),(0,n.jsx)("meta",{name:"apple-mobile-web-app-status-bar-style",content:"default"}),(0,n.jsx)("meta",{name:"format-detection",content:"telephone=no"}),(0,n.jsx)("meta",{name:"mobile-web-app-capable",content:"yes"}),(0,n.jsx)("meta",{name:"description",content:"Verify your email to access tenantli"}),(0,n.jsx)("link",{rel:"manifest",href:"/manifest.json"}),(0,n.jsx)("link",{rel:"apple-touch-icon",href:"/icons/apple-touch-icon.png"}),(0,n.jsx)("link",{rel:"stylesheet",href:"/styles/modern/theme.css"}),(0,n.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;500;600;700&display=swap",rel:"stylesheet"}),(0,n.jsx)("style",{children:"\n          body, html {\n            background-color: #FBF5DA;\n            min-height: 100vh;\n            margin: 0;\n            padding: 0;\n          }\n        "})]}),(0,n.jsxs)("div",{className:"relative min-h-screen w-full font-['Nunito']",style:{backgroundColor:"#FBF5DA"},children:[(0,n.jsx)("div",{className:"h-10 w-full"}),(0,n.jsxs)("div",{className:"w-full h-[65px] flex items-center justify-center p-5 bg-[#FBF5DA] relative",children:[(0,n.jsx)(c(),{href:"/login",className:"absolute left-[20px] top-1/2 -translate-y-1/2",children:(0,n.jsx)(u,{})}),(0,n.jsx)("h1",{className:"font-semibold text-[18px] text-center text-[#0B1420]",children:"Verify Email"})]}),(0,n.jsxs)("div",{className:"flex flex-col items-center p-6 gap-6 mt-4",children:[(0,n.jsx)("div",{className:"relative h-[180px] w-[180px] flex items-center justify-center",children:(0,n.jsx)("div",{className:"absolute w-[180px] h-[180px] bg-white rounded-full shadow-sm overflow-hidden",children:(0,n.jsx)("img",{src:"/images/confirmmail.svg",alt:"Email verification",className:"absolute w[200px] h[100px] left[15px] top-[0px] transform rotate-[0deg]"})})}),(0,n.jsxs)("div",{className:"flex flex-col items-center gap-3 max-w-[320px]",children:[(0,n.jsx)("h2",{className:"font-bold text-[18px] text-center text-[#0B1420] whitespace-nowrap",children:"Let's confirm it's you"}),(0,n.jsxs)("div",{className:"font-semibold text-[13px] text-center text-[#515964]",children:[(0,n.jsx)("p",{className:"mb-1",children:"Enter the 4-digit code we sent to:"}),(0,n.jsx)("p",{className:"font-semibold",children:s})]})]}),(0,n.jsx)("form",{id:"verifyForm",onSubmit:D,className:"w-full",children:(0,n.jsx)("div",{className:"flex flex-col items-center w-full mt-4",children:(0,n.jsxs)("div",{className:"flex flex-col items-center w-full",children:[(0,n.jsx)("div",{className:"flex justify-center gap-4 w-full",children:[0,1,2,3].map(t=>(0,n.jsx)("div",{className:"box-border w-[60px] h-[56px] bg-white border rounded-[16px] relative transition-colors duration-200 ".concat(p?"border-red-300":"border-[#D1E7D5]"),children:(0,n.jsx)("input",{ref:y[t],type:"text",inputMode:"numeric",maxLength:"1",value:e[t],onChange:e=>N(t,e.target.value.replace(/[^0-9]/g,"")),onKeyDown:e=>k(t,e),onPaste:0===t?E:void 0,className:"w-full h-full text-center text-[24px] font-bold bg-transparent outline-none text-[#0B1420]",style:{backgroundColor:"transparent",borderRadius:"16px"},autoFocus:0===t&&!e[0]})},t))}),p&&(0,n.jsxs)("div",{className:"mt-4 w-full max-w-[300px] bg-red-50 border border-red-200 rounded-lg px-4 py-3 text-sm text-red-600 flex items-center justify-center",children:[(0,n.jsx)("svg",{className:"w-5 h-5 mr-2 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),(0,n.jsx)("span",{className:"font-medium",children:p})]})]})})}),(0,n.jsxs)("button",{onClick:C,disabled:g>0,className:"w-full py-2 font-normal text-[14px] text-center text-[#1C2C40] mt-2",children:["Didn't get the code? ",(0,n.jsx)("span",{className:"font-semibold ".concat(g>0?"text-[#8A9099]":"text-[#4D935A]"),children:g>0?"Resend in ".concat(g,"s"):"Resend it"})]})]}),(0,n.jsx)("div",{className:"w-full flex justify-center fixed bottom-8",children:(0,n.jsx)("button",{type:"submit",form:"verifyForm",disabled:x||e.some(e=>""===e),className:"w-full max-w-[350px] h-[56px] flex justify-center items-center py-4 bg-[#1C2C40] rounded-[16px] disabled:opacity-50 mx-4",children:(0,n.jsx)("span",{className:"font-bold text-[16px] text-[#D1E7E2]",children:x?"Processing...":"Confirm"})})}),(0,n.jsx)("div",{className:"pb-[50px]"})]})]})}}},function(e){e.O(0,[1664,2888,9774,179],function(){return e(e.s=7599)}),_N_E=e.O()}]);