(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9578],{8184:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/reports/share-success",function(){return o(8592)}])},8592:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return i}});var l=o(5893),n=o(7294),r=o(1163),a=o(9008),s=o.n(a),c=o(1491);function i(){let{user:e,loading:t}=(0,c.a)(),o=(0,r.useRouter)(),{url:a,uuid:i}=o.query,[d,m]=(0,n.useState)(""),[x,p]=(0,n.useState)(!1);(0,n.useEffect)(()=>{if(!t&&!e){o.push("/welcome");return}let l=a||localStorage.getItem("report_share_url"),n=i||localStorage.getItem("report_uuid");if(l)m(l);else if(n){let e=window.location.origin,t="".concat(e,"/reports/shared/").concat(n);m(t),console.log("Constructed share URL from UUID:",t)}return()=>{localStorage.removeItem("report_share_url"),localStorage.removeItem("report_uuid"),localStorage.removeItem("report_share_success"),localStorage.removeItem("lastSharedPropertyId")}},[e,t,o,a]);let u=async()=>{try{if(d){let e=!1;if(console.log("Attempting to copy URL:",d),navigator.clipboard&&window.isSecureContext)try{console.log("Trying navigator.clipboard.writeText method"),await navigator.clipboard.writeText(d),e=!0,console.log("Clipboard API success")}catch(e){console.error("Clipboard API failed:",e)}if(!e)try{console.log("Trying execCommand method");let t=document.createElement("textarea");t.value=d,t.style.position="fixed",t.style.left="-999999px",t.style.top="-999999px",t.style.opacity="0",t.style.zIndex="-9999",t.contentEditable=!0,t.readOnly=!1,document.body.appendChild(t),t.focus(),t.select(),document.execCommand("copy")?(e=!0,console.log("execCommand success")):console.error("execCommand failed"),document.body.removeChild(t)}catch(e){console.error("execCommand method failed:",e)}e?(p(!0),console.log("Link copied to clipboard!"),setTimeout(()=>{p(!1)},3e3)):(console.error("All clipboard methods failed"),alert("Copy failed. Please manually copy this link: "+d))}}catch(e){console.error("Failed to copy link:",e),alert("Unable to copy link. Please manually copy: "+d)}},[h,f]=(0,n.useState)("Walkthrough");return(0,n.useEffect)(()=>{localStorage.getItem("lastSharedPropertyId")?f("Move-In Walkthrough"):localStorage.getItem("report_share_success")&&f("Move-Out")},[]),(0,l.jsxs)("div",{className:"relative w-full min-h-screen max-w-[500px] mx-auto bg-[#FBF5DA] font-['Nunito'] overflow-hidden",children:[(0,l.jsxs)(s(),{children:[(0,l.jsx)("title",{children:"Report Sent - tenantli"}),(0,l.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"}),(0,l.jsx)("meta",{name:"theme-color",content:"#FBF5DA"}),(0,l.jsx)("meta",{name:"apple-mobile-web-app-capable",content:"yes"})]}),(0,l.jsx)("div",{className:"w-full h-[100px]"}),(0,l.jsx)("div",{className:"w-[300px] h-[180px] mx-auto mt-5",children:(0,l.jsx)("img",{src:"/images/reportsuccess.png",alt:"Success",className:"w-full h-full object-contain"})}),(0,l.jsxs)("div",{className:"flex flex-col items-center p-0 gap-[8px] w-[300px] h-auto mx-auto mt-5",children:[(0,l.jsx)("h2",{className:"w-full font-bold text-[24px] leading-[120%] text-center text-[#0B1420]",children:"Your report was sent!"}),(0,l.jsxs)("p",{className:"w-full font-normal text-[14px] leading-[140%] text-center text-[#515964] mt-2 mb-4",children:["We've sent your time-stamped ",h.toLowerCase()," report to your landlord. You're covered."]}),d&&(0,l.jsxs)("div",{className:"w-full mt-4",children:[(0,l.jsx)("p",{className:"font-medium text-[14px] leading-[19px] text-[#6B7280] mb-2 text-center",children:"Share this report:"}),(0,l.jsxs)("div",{className:"flex items-center bg-[#F3F4F6] rounded-[12px] p-3 mb-4",children:[(0,l.jsx)("div",{className:"flex-grow truncate text-[14px] leading-[19px] text-[#0B1420] text-left",children:d}),(0,l.jsx)("button",{onClick:u,className:"ml-2 flex-shrink-0",children:x?(0,l.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{d:"M9 16.17L4.83 12L3.41 13.41L9 19L21 7L19.59 5.59L9 16.17Z",fill:"#4D935A"})}):(0,l.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{d:"M16 1H4C2.9 1 2 1.9 2 3V17H4V3H16V1ZM19 5H8C6.9 5 6 5.9 6 7V21C6 22.1 6.9 23 8 23H19C20.1 23 21 22.1 21 21V7C21 5.9 20.1 5 19 5ZM19 21H8V7H19V21Z",fill:"#1C2C40"})})})]}),(0,l.jsx)("div",{className:"flex justify-center space-x-4",children:(0,l.jsxs)("button",{onClick:()=>{if(d){let e=encodeURIComponent("".concat(h," Report")),t=encodeURIComponent("Hello,\n\nI've prepared a ".concat(h.toLowerCase()," report for your property. You can view it here:\n\n").concat(d,"\n\nThank you."));window.location.href="mailto:?subject=".concat(e,"&body=").concat(t)}},className:"flex flex-col items-center",children:[(0,l.jsx)("div",{className:"bg-[#1C2C40] w-12 h-12 rounded-full flex items-center justify-center mb-2",children:(0,l.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{d:"M20 4H4C2.9 4 2.01 4.9 2.01 6L2 18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V6C22 4.9 21.1 4 20 4ZM20 8L12 13L4 8V6L12 11L20 6V8Z",fill:"#D1E7E2"})})}),(0,l.jsx)("span",{className:"text-[12px] leading-[16px] text-[#515964]",children:"Email"})]})})]})]}),(0,l.jsx)("div",{className:"fixed bottom-8 left-0 right-0 mx-auto w-[90%] max-w-[350px]",children:(0,l.jsx)("button",{onClick:()=>o.push("/"),className:"w-full h-[56px] flex flex-row justify-center items-center bg-[#1C2C40] rounded-[16px] font-bold text-[16px] text-[#D1E7E2]",children:"Done"})})]})}}},function(e){e.O(0,[2888,9774,179],function(){return e(e.s=8184)}),_N_E=e.O()}]);