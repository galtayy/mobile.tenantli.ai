(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3186],{292:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/reports/new",function(){return t(8443)}])},6153:function(e,r,t){"use strict";t.d(r,{Z:function(){return m}});var s=t(5893),o=t(7294),a=t(1664),n=t.n(a),l=t(1163),i=t(1491),d=t(9008),c=t.n(d);function m(e){let{children:r}=e,[t,a]=(0,o.useState)(!1),{user:d,logout:m}=(0,i.a)(),h=(0,l.useRouter)();(0,o.useEffect)(()=>{document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light")},[]);let x=()=>{a(!1)},p=()=>{m(),x()},g=[{href:"/",label:"Home",icon:"home"},{href:"/properties",label:"My Properties",icon:"building"},{href:"/reports",label:"My Reports",icon:"document"},{href:"/products",label:"Products",icon:"shopping"},{href:"/cart",label:"Cart",icon:"cart"},{href:"/profile",label:"My Profile",icon:"user"}],u=e=>{let{name:r}=e;switch(r){case"home":return(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})});case"building":return(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})});case"document":return(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})});case"shopping":return(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})});case"cart":return(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})});case"user":return(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})});case"logout":return(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})});case"sun":return(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})});case"moon":return(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})});case"shield":return(0,s.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.618 5.984A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016zM12 9v2m0 4h.01"})});default:return null}};return(0,s.jsxs)("div",{className:"flex flex-col min-h-screen bg-background",children:[(0,s.jsx)(c(),{children:(0,s.jsx)("link",{rel:"stylesheet",href:"/styles/modern/theme.css"})}),(0,s.jsx)("header",{className:"bg-white dark:bg-gray-800 shadow-md",children:(0,s.jsx)("div",{className:"container mx-auto px-4",children:(0,s.jsxs)("div",{className:"flex justify-between items-center py-4",children:[(0,s.jsxs)(n(),{href:"/",className:"font-bold text-xl text-primary dark:text-primary-light flex items-center",children:[(0,s.jsx)(u,{name:"shield"}),(0,s.jsx)("span",{className:"ml-2",children:"tenantli"})]}),(0,s.jsxs)("nav",{className:"hidden md:flex items-center space-x-1",children:[g.map(e=>(0,s.jsxs)(n(),{href:e.href,className:"flex items-center px-3 py-2 rounded-md transition-colors ".concat(h.pathname===e.href?"text-primary bg-primary/5 dark:text-primary-light dark:bg-primary/10 font-medium":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:[(0,s.jsx)(u,{name:e.icon}),(0,s.jsx)("span",{className:"ml-2",children:e.label})]},e.href)),(0,s.jsxs)("button",{onClick:p,className:"flex items-center px-3 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors",children:[(0,s.jsx)(u,{name:"logout"}),(0,s.jsx)("span",{className:"ml-2",children:"Logout"})]})]}),(0,s.jsx)("div",{className:"flex items-center md:hidden",children:(0,s.jsx)("button",{onClick:()=>{a(!t)},className:"p-2 rounded-md text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none","aria-label":"Menu",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"h-6 w-6",children:t?(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})})]})})}),t&&(0,s.jsx)("div",{className:"md:hidden bg-white dark:bg-gray-800 shadow-md",children:(0,s.jsx)("div",{className:"container mx-auto px-4 py-2",children:(0,s.jsxs)("nav",{className:"flex flex-col space-y-1",children:[g.map(e=>(0,s.jsxs)(n(),{href:e.href,className:"flex items-center px-3 py-2 rounded-md transition-colors ".concat(h.pathname===e.href?"text-primary bg-primary/5 dark:text-primary-light dark:bg-primary/10 font-medium":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),onClick:x,children:[(0,s.jsx)(u,{name:e.icon}),(0,s.jsx)("span",{className:"ml-2",children:e.label})]},e.href)),(0,s.jsxs)("button",{onClick:p,className:"flex items-center px-3 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors text-left",children:[(0,s.jsx)(u,{name:"logout"}),(0,s.jsx)("span",{className:"ml-2",children:"Logout"})]})]})})}),(0,s.jsx)("main",{className:"flex-grow bg-background dark:bg-gray-900",children:r}),(0,s.jsx)("footer",{className:"bg-white dark:bg-gray-800 shadow-md-top mt-auto",children:(0,s.jsx)("div",{className:"container mx-auto px-4 py-6",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[(0,s.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:["\xa9 ",new Date().getFullYear()," tenantli. All rights reserved."]}),(0,s.jsxs)("div",{className:"flex space-x-4 mt-3 md:mt-0",children:[(0,s.jsx)(n(),{href:"/terms",className:"text-gray-600 dark:text-gray-400 hover:text-primary dark:hover:text-primary-light text-sm",children:"Terms of Service"}),(0,s.jsx)(n(),{href:"/privacy",className:"text-gray-600 dark:text-gray-400 hover:text-primary dark:hover:text-primary-light text-sm",children:"Privacy Policy"})]})]})})})]})}},8443:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return d}});var s=t(5893),o=t(7294),a=t(1163),n=t(2920),l=t(6153),i=t(610);function d(){var e,r;let[t,d]=(0,o.useState)([]),[c,m]=(0,o.useState)(""),[h,x]=(0,o.useState)(""),[p,g]=(0,o.useState)(""),[u,v]=(0,o.useState)(""),[b,j]=(0,o.useState)(!1),[y,f]=(0,o.useState)(!0),[N,w]=(0,o.useState)(1),[k,C]=(0,o.useState)({}),[L,M]=(0,o.useState)({}),[S,P]=(0,o.useState)({}),[R,_]=(0,o.useState)({}),A=(0,o.useRef)({}),[E,O]=(0,o.useState)(null),[B,I]=(0,o.useState)(""),W=(0,a.useRouter)();(0,o.useEffect)(()=>{let e=async()=>{try{console.log("Fetching all properties");let e=await i.E.properties.getAll();d(e.data),W.query.propertyId&&(console.log("Found propertyId in query params:",W.query.propertyId),m(W.query.propertyId)),f(!1)}catch(e){console.error("Properties fetch error:",e),n.Am.error("An error occurred while loading properties."),f(!1)}};W.isReady&&e()},[W.isReady,W.query]),(0,o.useEffect)(()=>{c&&(console.log("Selected property ID:",c),(async()=>{try{console.log("Fetching property details for ID:",c);let e=await i.E.properties.getById(c);console.log("Property API Response:",e.data);let r=e.data,t=null;if(!r.bedrooms&&!r.bathrooms&&!r.living_rooms&&!r.kitchen_count){console.log("Property details not available from API, checking localStorage");try{let e=localStorage.getItem("propertyDetails");if(e){let s=JSON.parse(e);s[c]&&(console.log("Found property details in localStorage:",s[c]),t=s[c],r.bedrooms=t.bedrooms,r.bathrooms=t.bathrooms,r.living_rooms=t.living_rooms,r.kitchen_count=t.kitchen_count,r.additional_spaces=t.additional_spaces)}}catch(e){console.error("Error loading property details from localStorage:",e)}}console.log("Final property data for room creation:",r);let s={};if(r.bedrooms&&"0"!==r.bedrooms){console.log("Adding bedrooms:",r.bedrooms);let e="6+"===r.bedrooms?6:parseInt(r.bedrooms);for(let r=1;r<=e;r++)s["bedroom_".concat(r)]="Bedroom ".concat(r)}if(r.bathrooms){console.log("Adding bathrooms:",r.bathrooms);let e="4+"===r.bathrooms?4:r.bathrooms.includes(".5")?Math.floor(parseFloat(r.bathrooms))+1:parseInt(r.bathrooms);for(let r=1;r<=e;r++)s["bathroom_".concat(r)]="Bathroom ".concat(r)}let o=r.living_rooms||r.livingRooms;if(o&&"0"!==o){console.log("Adding living rooms:",o);let e="4+"===o?4:parseInt(o);for(let r=1;r<=e;r++)s["livingroom_".concat(r)]="Living Room ".concat(r)}let a=r.kitchen_count||r.kitchenCount;if(a&&"0"!==a){console.log("Adding kitchens:",a);let e="4+"===a?4:parseInt(a);for(let r=1;r<=e;r++)s["kitchen_".concat(r)]="Kitchen ".concat(r)}if(r.additional_spaces){let e;console.log("Adding additional spaces:",r.additional_spaces);try{e="string"==typeof r.additional_spaces?JSON.parse(r.additional_spaces):r.additional_spaces,Object.entries(e).forEach(e=>{let[r,t]=e;t&&(s[r]=r.charAt(0).toUpperCase()+r.slice(1))})}catch(e){console.error("Error parsing additional spaces:",e)}}0===Object.keys(s).length&&(console.log("No rooms found, adding default room"),s.general="General"),console.log("Final rooms structure:",s);let n={},l={},d={},m={};Object.keys(s).forEach(e=>{n[e]=[],l[e]=[],d[e]={},m[e]={}}),I(Object.keys(s)[0]),O(s),C(n),M(l),P(d),_(m)}catch(e){console.error("Error fetching property details:",e),n.Am.error("Failed to load property details."),O({general:"General"}),I("general"),C({general:[]}),M({general:[]}),P({general:{}}),_({general:{}})}})())},[c]),(0,o.useEffect)(()=>{if(!E)return;let e={...L},r=[];return Object.keys(E).forEach(t=>{var s;if(!(null===(s=k[t])||void 0===s?void 0:s.length)){e[t]=[];return}e[t]=[];for(let s=0;s<k[t].length;s++){let o=k[t][s],a=URL.createObjectURL(o);e[t].push(a),r.push(a)}}),M(e),()=>{r.forEach(e=>URL.revokeObjectURL(e))}},[k,E]);let F=(e,r)=>{if(e.target.files&&r){var t;let s=Array.from(e.target.files),o=(null===(t=k[r])||void 0===t?void 0:t.length)||0;C(e=>({...e,[r]:[...e[r]||[],...s]}));let a={...S[r]},n={...R[r]};s.forEach((e,r)=>{let t=o+r;a[t]="",n[t]=[]}),P(e=>({...e,[r]:a})),_(e=>({...e,[r]:n}))}},H=(e,r)=>{C(t=>({...t,[e]:t[e].filter((e,t)=>t!==r)})),M(t=>({...t,[e]:t[e].filter((e,t)=>t!==r)}));let t={...S[e]},s={...R[e]};delete t[r],delete s[r];let o={},a={},n=0;for(let l=0;l<k[e].length;l++)l!==r&&(o[n]=t[l],a[n]=s[l],n++);P(r=>({...r,[e]:o})),_(r=>({...r,[e]:a}))},z=(e,r,t)=>{P(s=>({...s,[e]:{...s[e],[r]:t}}))},T=(e,r,t)=>{t.trim()&&_(s=>({...s,[e]:{...s[e],[r]:[...s[e][r]||[],t.trim()]}}))},q=(e,r,t)=>{_(s=>({...s,[e]:{...s[e],[r]:s[e][r].filter((e,r)=>r!==t)}}))},D=(e,r,t)=>{"Enter"===e.key&&e.target.value.trim()&&(T(r,t,e.target.value),e.target.value="",e.preventDefault())},V=async e=>{if(e.preventDefault(),!c||!h||!u){n.Am.error("Please fill in all required fields.");return}j(!0);try{let e={property_id:c,title:h,description:p,type:u};console.log("Sending report creation request:",e);let t=await i.E.reports.create(e);console.log("Report creation response:",t.data);let s=t.data.id;if(E&&Object.keys(E).some(e=>{var r;return(null===(r=k[e])||void 0===r?void 0:r.length)>0}))for(let e of Object.keys(E)){var r;if((null===(r=k[e])||void 0===r?void 0:r.length)>0)for(let r=0;r<k[e].length;r++){let t=new FormData;t.append("photo",k[e][r]);let o=E[e];S[e]&&S[e][r]&&t.append("note",S[e][r]);let a=R[e]&&R[e][r]?[...R[e][r]]:[];a.includes(o)||a.push(o),a.length>0&&t.append("tags",JSON.stringify(a)),console.log("Uploading ".concat(o," photo ").concat(r+1,"...")),await i.E.photos.upload(s,t),console.log("".concat(o," photo ").concat(r+1," uploaded."))}}n.Am.success("Report created successfully."),W.push("/reports/".concat(s))}catch(r){console.error("Report creation error:",r);let e="An error occurred while creating the report.";r.response&&(console.error("API response error:",r.response.data),e=r.response.data.message||e,401===r.response.status&&(e="Your session has expired. Redirecting to login page...",setTimeout(()=>{W.push("/login")},1500))),n.Am.error(e)}finally{j(!1)}};return y?(0,s.jsx)(l.Z,{children:(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Create New Report"}),(0,s.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})})]})}):(0,s.jsx)(l.Z,{children:(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-3xl animate-fadeIn",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-indigo-700 mb-2",children:"Create New Report"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Document the condition of your property"})]}),0===t.length?(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden border border-gray-100 p-8 text-center",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"You need to add a property first before creating a report"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:"Reports are used to document the condition of your properties. You need to add at least one property before continuing."}),(0,s.jsx)("button",{onClick:()=>W.push("/properties/new"),className:"btn btn-primary hover:bg-indigo-500 transition-all duration-300",children:"Add Property"})]}):(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden border border-gray-100",children:[(0,s.jsxs)("div",{className:"bg-indigo-50 p-4",children:[(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:(0,s.jsx)("div",{className:"bg-indigo-600 h-2.5 rounded-full",style:{width:1===N?"33%":2===N?"66%":"100%"}})}),(0,s.jsxs)("div",{className:"flex justify-between mt-2 text-xs text-gray-500",children:[(0,s.jsxs)("span",{className:"font-medium text-indigo-700",children:["Step ",N," of 3"]}),(0,s.jsx)("span",{children:1===N?"Basic Information":2===N?"Photos":"Confirmation"})]})]}),(0,s.jsx)("form",{onSubmit:3===N?V:e=>e.preventDefault(),children:1===N?(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"property",className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Property*"}),(0,s.jsxs)("select",{id:"property",value:c,onChange:e=>m(e.target.value),className:"input focus:border-indigo-500 transition-all duration-300",required:!0,children:[(0,s.jsx)("option",{value:"",children:"Select a property"}),t.map(e=>(0,s.jsx)("option",{value:e.id,children:e.address},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Report Title*"}),(0,s.jsx)("input",{id:"title",type:"text",value:h,onChange:e=>x(e.target.value),className:"input focus:border-indigo-500 transition-all duration-300",placeholder:"Enter a short title for the report",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Report Description"}),(0,s.jsx)("textarea",{id:"description",value:p,onChange:e=>g(e.target.value),rows:3,className:"input focus:border-indigo-500 transition-all duration-300",placeholder:"General description about the report (optional)"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Report Type*"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,s.jsxs)("div",{className:"p-4 rounded-lg border cursor-pointer text-center transition-all duration-300 ".concat("move-in"===u?"border-green-500 bg-green-50 text-green-700":"border-gray-200 hover:border-indigo-200 hover:bg-indigo-50"),onClick:()=>v("move-in"),children:[(0,s.jsx)("input",{id:"type-move-in",name:"reportType",type:"radio",value:"move-in",checked:"move-in"===u,onChange:()=>v("move-in"),className:"hidden",required:!0}),(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mx-auto mb-2 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),(0,s.jsx)("label",{htmlFor:"type-move-in",className:"font-medium block",children:"Pre-Move-In"})]}),(0,s.jsxs)("div",{className:"p-4 rounded-lg border cursor-pointer text-center transition-all duration-300 ".concat("move-out"===u?"border-red-500 bg-red-50 text-red-700":"border-gray-200 hover:border-indigo-200 hover:bg-indigo-50"),onClick:()=>v("move-out"),children:[(0,s.jsx)("input",{id:"type-move-out",name:"reportType",type:"radio",value:"move-out",checked:"move-out"===u,onChange:()=>v("move-out"),className:"hidden"}),(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mx-auto mb-2 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),(0,s.jsx)("label",{htmlFor:"type-move-out",className:"font-medium block",children:"Post-Move-Out"})]}),(0,s.jsxs)("div",{className:"p-4 rounded-lg border cursor-pointer text-center transition-all duration-300 ".concat("general"===u?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-indigo-200 hover:bg-indigo-50"),onClick:()=>v("general"),children:[(0,s.jsx)("input",{id:"type-general",name:"reportType",type:"radio",value:"general",checked:"general"===u,onChange:()=>v("general"),className:"hidden"}),(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mx-auto mb-2 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,s.jsx)("label",{htmlFor:"type-general",className:"font-medium block",children:"General Observation"})]})]})]})]}),(0,s.jsxs)("div",{className:"pt-4 flex justify-between items-center border-t border-gray-100 mt-6",children:[(0,s.jsx)("button",{type:"button",onClick:()=>W.back(),className:"btn btn-secondary hover:bg-gray-100 transition-all duration-300",children:"Cancel"}),(0,s.jsx)("button",{type:"button",onClick:()=>{c&&h&&u?w(2):n.Am.error("Please fill in all required fields.")},className:"btn btn-primary hover:bg-indigo-500 transition-all duration-300",children:"Continue"})]})]}):2===N?(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Upload Photos"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:"Upload photos for each room to document the condition of your property"}),E?(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Select Room:"}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-2 md:flex md:flex-wrap md:gap-3",children:Object.entries(E).map(e=>{var r,t;let[o,a]=e;return(0,s.jsxs)("button",{type:"button",onClick:()=>I(o),className:"flex items-center justify-between px-3 py-2 rounded-lg text-left w-full md:w-auto transition-all ".concat((null===(r=k[o])||void 0===r?void 0:r.length)>0?"bg-green-50 border border-green-200 text-green-700 font-medium":B===o?"bg-indigo-50 border border-indigo-200 text-indigo-700 font-medium":"bg-gray-50 border border-gray-200 text-gray-700 hover:bg-gray-100"),children:[(0,s.jsx)("span",{className:"whitespace-nowrap",children:a}),(null===(t=k[o])||void 0===t?void 0:t.length)>0&&(0,s.jsx)("span",{className:"ml-2 bg-green-100 text-green-700 px-2 py-0.5 rounded-full text-xs",children:k[o].length})]},o)})})]}),B?(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsxs)("h4",{className:"text-lg font-medium text-gray-800 mb-4",children:[E[B]," Photos"]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-6 mb-6",children:[null===(e=L[B])||void 0===e?void 0:e.map((e,r)=>{var t;return(0,s.jsxs)("div",{className:"relative bg-gray-50 p-4 rounded-lg border border-gray-200",children:[(0,s.jsx)("img",{src:e,alt:"".concat(E[B]," Photo ").concat(r+1),className:"w-32 h-32 object-cover rounded-lg"}),(0,s.jsx)("button",{type:"button",onClick:()=>H(B,r),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center shadow-md","aria-label":"Remove photo",children:"\xd7"}),(0,s.jsxs)("div",{className:"mt-3 w-32",children:[(0,s.jsx)("input",{type:"text",placeholder:"Add note",value:S[B]&&S[B][r]||"",onChange:e=>z(B,r,e.target.value),className:"w-full text-xs p-2 border border-gray-300 rounded"}),(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsx)("input",{type:"text",placeholder:"Add tag and press Enter",onKeyPress:e=>D(e,B,r),className:"w-full text-xs p-2 border border-gray-300 rounded"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:R[B]&&(null===(t=R[B][r])||void 0===t?void 0:t.map((e,t)=>(0,s.jsxs)("span",{className:"inline-flex items-center text-xs bg-indigo-50 text-indigo-700 rounded px-1.5 py-0.5",children:[e,(0,s.jsx)("button",{type:"button",onClick:()=>q(B,r,t),className:"ml-1 text-gray-400 hover:text-gray-600",children:"\xd7"})]},t)))})]})]})]},r)}),(0,s.jsx)("div",{className:"w-32 h-32 flex items-center justify-center border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:border-indigo-500 transition-all duration-300",onClick:()=>{var e;return null===(e=A.current[B])||void 0===e?void 0:e.click()},children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 mx-auto text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,s.jsx)("span",{className:"text-xs text-gray-500 mt-2 block",children:"Add Photo"})]})}),(0,s.jsx)("input",{type:"file",ref:e=>A.current[B]=e,onChange:e=>F(e,B),accept:"image/*",multiple:!0,className:"hidden"})]})]}):(0,s.jsx)("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:(0,s.jsx)("p",{className:"text-gray-600",children:"Please select a room to add photos"})}),(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mt-6",children:[(0,s.jsx)("h4",{className:"font-medium text-gray-700 mb-3",children:"Photo Summary"}),(0,s.jsxs)("div",{className:"grid gap-2",children:[Object.entries(E).map(e=>{var r,t;let[o,a]=e;return(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("span",{className:"text-sm",children:[a,":"]}),(0,s.jsxs)("span",{className:"text-sm font-medium",children:[(null===(r=k[o])||void 0===r?void 0:r.length)||0," photo",1!==((null===(t=k[o])||void 0===t?void 0:t.length)||0)?"s":""]})]},o)}),(0,s.jsxs)("div",{className:"border-t border-gray-200 mt-2 pt-2 flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-sm font-medium",children:"Total:"}),(0,s.jsxs)("span",{className:"text-sm font-medium",children:[Object.values(k).reduce((e,r)=>e+((null==r?void 0:r.length)||0),0)," photos"]})]})]})]})]}):(0,s.jsxs)("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-indigo-500 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Loading property rooms..."})]})]}),(0,s.jsxs)("div",{className:"pt-4 flex justify-between items-center border-t border-gray-100 mt-6",children:[(0,s.jsx)("button",{type:"button",onClick:()=>w(1),className:"btn btn-secondary hover:bg-gray-100 transition-all duration-300",children:"Back"}),(0,s.jsx)("button",{type:"button",onClick:()=>w(3),className:"btn btn-primary hover:bg-indigo-500 transition-all duration-300",children:"Continue"})]})]}):(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"bg-green-50 border border-green-100 rounded-lg p-4 flex items-start",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500 mt-0.5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium text-green-800 text-sm",children:"Ready to Save"}),(0,s.jsx)("p",{className:"text-green-700 text-xs mt-1",children:"Please review your report details before saving"})]})]}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,s.jsx)("h3",{className:"font-medium text-gray-700 mb-3",children:"Report Information"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-xs text-gray-500 block",children:"Property:"}),(0,s.jsx)("p",{className:"text-sm",children:null===(r=t.find(e=>e.id.toString()===c.toString()))||void 0===r?void 0:r.address})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-xs text-gray-500 block",children:"Report Title:"}),(0,s.jsx)("p",{className:"text-sm",children:h})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-xs text-gray-500 block",children:"Report Type:"}),(0,s.jsx)("p",{className:"text-sm",children:"move-in"===u?"Pre-Move-In":"move-out"===u?"Post-Move-Out":"General Observation"})]}),p&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-xs text-gray-500 block",children:"Description:"}),(0,s.jsx)("p",{className:"text-sm",children:p})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,s.jsx)("h3",{className:"font-medium text-gray-700 mb-3",children:"Photos"}),E&&Object.values(k).some(e=>(null==e?void 0:e.length)>0)?(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries(E).map(e=>{var r,t;let[o,a]=e;return(null===(r=k[o])||void 0===r?void 0:r.length)>0&&(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsxs)("p",{className:"text-xs font-medium text-gray-600 mb-1",children:[a,":"]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-1",children:null===(t=L[o])||void 0===t?void 0:t.map((e,r)=>(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)("img",{src:e,alt:"".concat(a," Photo ").concat(r+1),className:"w-12 h-12 object-cover rounded border border-gray-200"})},r))})]},o)})}),(0,s.jsxs)("div",{className:"text-xs text-gray-500 mt-2 w-full",children:[Object.values(k).reduce((e,r)=>e+((null==r?void 0:r.length)||0),0)," photo",1!==Object.values(k).reduce((e,r)=>e+((null==r?void 0:r.length)||0),0)?"s":""," attached"]})]}):(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"No photos attached"})]})]}),(0,s.jsxs)("div",{className:"pt-4 flex justify-between items-center border-t border-gray-100 mt-6",children:[(0,s.jsx)("button",{type:"button",onClick:()=>w(2),className:"btn btn-secondary hover:bg-gray-100 transition-all duration-300",children:"Back"}),(0,s.jsx)("button",{type:"submit",className:"btn btn-primary hover:bg-indigo-500 transition-all duration-300",disabled:b,children:b?(0,s.jsxs)("span",{className:"flex items-center",children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Create Report"})]})]})})]})]})})}}},function(e){e.O(0,[1664,2888,9774,179],function(){return e(e.s=292)}),_N_E=e.O()}]);