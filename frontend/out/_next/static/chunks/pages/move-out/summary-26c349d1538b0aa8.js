(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4881],{5602:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/move-out/summary",function(){return o(5224)}])},7443:function(e,t,o){"use strict";var r=o(3454);o(1479);var s=o(7294),n=s&&"object"==typeof s&&"default"in s?s:{default:s},i=void 0!==r&&r.env&&!0,a=function(e){return"[object String]"===Object.prototype.toString.call(e)},l=function(){function e(e){var t=void 0===e?{}:e,o=t.name,r=void 0===o?"stylesheet":o,s=t.optimizeForSpeed,n=void 0===s?i:s;d(a(r),"`name` must be a string"),this._name=r,this._deletedRulePlaceholder="#"+r+"-deleted-rule____{}",d("boolean"==typeof n,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=n,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0;var l=document.querySelector('meta[property="csp-nonce"]');this._nonce=l?l.getAttribute("content"):null}var t=e.prototype;return t.setOptimizeForSpeed=function(e){d("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),d(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},t.isOptimizeForSpeed=function(){return this._optimizeForSpeed},t.inject=function(){var e=this;if(d(!this._injected,"sheet already injected"),this._injected=!0,this._optimizeForSpeed){this._tags[0]=this.makeStyleTag(this._name),this._optimizeForSpeed="insertRule"in this.getSheet(),this._optimizeForSpeed||(i||console.warn("StyleSheet: optimizeForSpeed mode not supported falling back to standard mode."),this.flush(),this._injected=!0);return}this._serverSheet={cssRules:[],insertRule:function(t,o){return"number"==typeof o?e._serverSheet.cssRules[o]={cssText:t}:e._serverSheet.cssRules.push({cssText:t}),o},deleteRule:function(t){e._serverSheet.cssRules[t]=null}}},t.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]},t.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},t.insertRule=function(e,t){if(d(a(e),"`insertRule` accepts only strings"),this._optimizeForSpeed){var o=this.getSheet();"number"!=typeof t&&(t=o.cssRules.length);try{o.insertRule(e,t)}catch(t){return i||console.warn("StyleSheet: illegal rule: \n\n"+e+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),-1}}else{var r=this._tags[t];this._tags.push(this.makeStyleTag(this._name,e,r))}return this._rulesCount++},t.replaceRule=function(e,t){if(this._optimizeForSpeed){var o=this.getSheet();if(t.trim()||(t=this._deletedRulePlaceholder),!o.cssRules[e])return e;o.deleteRule(e);try{o.insertRule(t,e)}catch(r){i||console.warn("StyleSheet: illegal rule: \n\n"+t+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),o.insertRule(this._deletedRulePlaceholder,e)}}else{var r=this._tags[e];d(r,"old rule at index `"+e+"` not found"),r.textContent=t}return e},t.deleteRule=function(e){if(this._optimizeForSpeed)this.replaceRule(e,"");else{var t=this._tags[e];d(t,"rule at index `"+e+"` not found"),t.parentNode.removeChild(t),this._tags[e]=null}},t.flush=function(){this._injected=!1,this._rulesCount=0,this._tags.forEach(function(e){return e&&e.parentNode.removeChild(e)}),this._tags=[]},t.cssRules=function(){var e=this;return this._tags.reduce(function(t,o){return o?t=t.concat(Array.prototype.map.call(e.getSheetForTag(o).cssRules,function(t){return t.cssText===e._deletedRulePlaceholder?null:t})):t.push(null),t},[])},t.makeStyleTag=function(e,t,o){t&&d(a(t),"makeStyleTag accepts only strings as second parameter");var r=document.createElement("style");this._nonce&&r.setAttribute("nonce",this._nonce),r.type="text/css",r.setAttribute("data-"+e,""),t&&r.appendChild(document.createTextNode(t));var s=document.head||document.getElementsByTagName("head")[0];return o?s.insertBefore(r,o):s.appendChild(r),r},function(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,[{key:"length",get:function(){return this._rulesCount}}]),e}();function d(e,t){if(!e)throw Error("StyleSheet: "+t+".")}var c=function(e){for(var t=5381,o=e.length;o;)t=33*t^e.charCodeAt(--o);return t>>>0},u={};function m(e,t){if(!t)return"jsx-"+e;var o=String(t),r=e+o;return u[r]||(u[r]="jsx-"+c(e+"-"+o)),u[r]}function h(e,t){var o=e+t;return u[o]||(u[o]=t.replace(/__jsx-style-dynamic-selector/g,e)),u[o]}var p=function(){function e(e){var t=void 0===e?{}:e,o=t.styleSheet,r=void 0===o?null:o,s=t.optimizeForSpeed,n=void 0!==s&&s;this._sheet=r||new l({name:"styled-jsx",optimizeForSpeed:n}),this._sheet.inject(),r&&"boolean"==typeof n&&(this._sheet.setOptimizeForSpeed(n),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var t=e.prototype;return t.add=function(e){var t=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(e.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer||(this._fromServer=this.selectFromServer(),this._instancesCounts=Object.keys(this._fromServer).reduce(function(e,t){return e[t]=0,e},{}));var o=this.getIdAndRules(e),r=o.styleId,s=o.rules;if(r in this._instancesCounts){this._instancesCounts[r]+=1;return}var n=s.map(function(e){return t._sheet.insertRule(e)}).filter(function(e){return -1!==e});this._indices[r]=n,this._instancesCounts[r]=1},t.remove=function(e){var t=this,o=this.getIdAndRules(e).styleId;if(function(e,t){if(!e)throw Error("StyleSheetRegistry: "+t+".")}(o in this._instancesCounts,"styleId: `"+o+"` not found"),this._instancesCounts[o]-=1,this._instancesCounts[o]<1){var r=this._fromServer&&this._fromServer[o];r?(r.parentNode.removeChild(r),delete this._fromServer[o]):(this._indices[o].forEach(function(e){return t._sheet.deleteRule(e)}),delete this._indices[o]),delete this._instancesCounts[o]}},t.update=function(e,t){this.add(t),this.remove(e)},t.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},t.cssRules=function(){var e=this,t=this._fromServer?Object.keys(this._fromServer).map(function(t){return[t,e._fromServer[t]]}):[],o=this._sheet.cssRules();return t.concat(Object.keys(this._indices).map(function(t){return[t,e._indices[t].map(function(e){return o[e].cssText}).join(e._optimizeForSpeed?"":"\n")]}).filter(function(e){return!!e[1]}))},t.styles=function(e){var t,o;return t=this.cssRules(),void 0===(o=e)&&(o={}),t.map(function(e){var t=e[0],r=e[1];return n.default.createElement("style",{id:"__"+t,key:"__"+t,nonce:o.nonce?o.nonce:void 0,dangerouslySetInnerHTML:{__html:r}})})},t.getIdAndRules=function(e){var t=e.children,o=e.dynamic,r=e.id;if(o){var s=m(r,o);return{styleId:s,rules:Array.isArray(t)?t.map(function(e){return h(s,e)}):[h(s,t)]}}return{styleId:m(r),rules:Array.isArray(t)?t:[t]}},t.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce(function(e,t){return e[t.id.slice(2)]=t,e},{})},e}(),f=s.createContext(null);f.displayName="StyleSheetContext";var v=n.default.useInsertionEffect||n.default.useLayoutEffect,x=new p;function y(e){var t=x||s.useContext(f);return t&&v(function(){return t.add(e),function(){t.remove(e)}},[e.id,String(e.dynamic)]),null}y.dynamic=function(e){return e.map(function(e){return m(e[0],e[1])}).join(" ")},t.style=y},645:function(e,t,o){"use strict";e.exports=o(7443).style},5224:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return x}});var r=o(5893),s=o(645),n=o.n(s),i=o(7294),a=o(1163),l=o(9008),d=o.n(l),c=o(1664),u=o.n(c),m=o(1491),h=o(610),p=o(2920);let f=()=>(0,r.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M15 19.9201L8.47997 13.4001C7.70997 12.6301 7.70997 11.3701 8.47997 10.6001L15 4.08008",stroke:"#292D32",strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"})}),v=()=>(0,r.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M7.42505 16.6L12.8584 11.1667C13.5 10.525 13.5 9.47502 12.8584 8.83336L7.42505 3.40002",stroke:"#292D32",strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"})});function x(){let{user:e,loading:t}=(0,m.a)(),o=(0,a.useRouter)(),{propertyId:s,from:l}=o.query,[c,x]=(0,i.useState)(!1),[y,g]=(0,i.useState)(null),[_,j]=(0,i.useState)(!1),[N,b]=(0,i.useState)({address:"Not specified",lease_duration:null,lease_duration_type:"months",deposit_amount:null,contract_start_date:null,contract_end_date:null,move_in_date:null,moveout_date:null,landlord_email:null,landlord_phone:null}),[w,S]=(0,i.useState)(null),[C,F]=(0,i.useState)(null),[O,k]=(0,i.useState)([]),[R,A]=(0,i.useState)({});(0,i.useEffect)(()=>{t||e||o.push("/welcome")},[e,t,o]),(0,i.useEffect)(()=>{s&&(async()=>{try{if("walkthrough"===l)j(!0);else try{let e=await h.E.properties.hasSharedMoveOutReport(s);e.data&&e.data.hasSharedMoveOutReport&&j(!0)}catch(e){console.error("Error checking report status:",e)}let t=(await h.E.properties.getById(s)).data;if(!t){console.error("Failed to load property data"),p.Am.error("Failed to load property information");return}console.log("Property data:",t),g(t);let o={...N,address:t.address||t.propertyName||"Not specified",lease_duration:t.lease_duration||null,lease_duration_type:t.lease_duration_type||"months",deposit_amount:t.deposit_amount||null,contract_start_date:t.contract_start_date||null,contract_end_date:t.contract_end_date||null,move_in_date:t.move_in_date||null,moveout_date:t.moveout_date||null,landlord_email:t.landlord_email||null,landlord_phone:t.landlord_phone||null};b(o);let r=localStorage.getItem("property_".concat(s,"_user"));if(r)try{let e=JSON.parse(r);S(e)}catch(t){console.error("Error parsing user details:",t),S({name:(null==e?void 0:e.name)||"",email:(null==e?void 0:e.email)||"",phone:""})}else S({name:(null==e?void 0:e.name)||"",email:(null==e?void 0:e.email)||"",phone:""});if(t.landlord_email||t.landlord_phone)F({email:t.landlord_email||"",phone:t.landlord_phone||""});else{let e=localStorage.getItem("property_".concat(s,"_landlord"));if(e)try{let t=JSON.parse(e);F(t)}catch(e){console.error("Error parsing landlord details:",e),F({email:"",phone:""})}else F({email:"",phone:""})}try{let e=await h.E.properties.getRooms(s);if(e.data&&e.data.length>0){let t=e.data.map(e=>({id:e.roomId,roomId:e.roomId,name:e.roomName,roomName:e.roomName,type:e.roomType,roomType:e.roomType,photoCount:e.photoCount||0,roomQuality:e.roomQuality||null,roomIssueNotes:e.roomIssueNotes||[],moveOutNotes:e.moveOutNotes||[],moveOutPhotoCount:e.moveOutPhotoCount||0,moveOutCompleted:e.moveOutCompleted||!1,moveOutDate:e.moveOutDate||null}));for(let e of(k(t),t))await E(e.id)}}catch(t){console.error("Error loading rooms:",t);let e=localStorage.getItem("property_".concat(s,"_rooms"));if(e){let t=JSON.parse(e).map(e=>({id:e.roomId,roomId:e.roomId,name:e.roomName,roomName:e.roomName,type:e.roomType,roomType:e.roomType,photoCount:e.photoCount||0,moveOutPhotoCount:e.moveOutPhotoCount||0,roomQuality:e.roomQuality||null,roomIssueNotes:e.roomIssueNotes||[],moveOutNotes:e.moveOutNotes||[],moveOutCompleted:e.moveOutCompleted||!1,moveOutDate:e.moveOutDate||null}));k(t)}}}catch(e){console.error("Error loading property data:",e),p.Am.error("Failed to load property details")}})()},[s,e,l]);let E=async e=>{try{let t=await h.E.photos.getByRoom(s,e,!0);if(t.data&&t.data.length>0){let o=t.data.map(e=>({id:e.id,src:h.E.getPhotoUrl(e),url:h.E.getPhotoUrl(e),note:e.note||"",timestamp:e.created_at||e.timestamp||""}));A(t=>({...t,[e]:{photos:o}}))}}catch(t){console.error("Error fetching photos for room ".concat(e,":"),t)}},I=e=>{if(R[e]){if(Array.isArray(R[e]))return R[e].length;if(R[e].photos&&Array.isArray(R[e].photos))return R[e].photos.length}let t=O.find(t=>t.id===e||t.roomId===e);return t&&t.moveOutPhotoCount?t.moveOutPhotoCount:0},z=e=>{try{if(e.moveOutNotes&&Array.isArray(e.moveOutNotes))return e.moveOutNotes.length;return 0}catch(t){return console.error("Error calculating note count:",t,e),0}},B=async()=>{x(!0);try{let r=await h.E.reports.getByProperty(s),n=r.data?r.data.filter(e=>"move-out"===e.type):[];if(0===n.length){console.log("Creating new move-out report for property:",N.address);let r={property_id:s,title:"Move-out Walkthrough for ".concat(N.address),description:"Automatically generated move-out walkthrough report",type:"move-out",address:N.address,tenant_name:(null==w?void 0:w.name)||(null==e?void 0:e.name)||"",tenant_email:(null==w?void 0:w.email)||(null==e?void 0:e.email)||"",tenant_phone:(null==w?void 0:w.phone)||"",landlord_name:"Property Owner",landlord_email:(null==C?void 0:C.email)||N.landlord_email||"",landlord_phone:(null==C?void 0:C.phone)||N.landlord_phone||"",rooms:O.map(e=>({id:e.id,name:e.name,type:e.type,notes:e.moveOutNotes||[]}))},n=await h.E.reports.create(r),i=n.data.id,a=n.data.uuid;if(Object.keys(R).length>0)for(let e in console.log("Associating photos with the report"),R){var t;let o=O.find(t=>t.id===e);if(o&&(null===(t=R[e])||void 0===t?void 0:t.photos)){for(let t of R[e].photos)if(t&&t.id)try{await h.E.photos.associateWithReport(t.id,i,{roomId:e,roomName:o.name})}catch(e){console.error("Error associating photo ".concat(t.id," with report:"),e)}}}if((null==C?void 0:C.email)||N.landlord_email){let e=(null==C?void 0:C.email)||N.landlord_email;console.log("Sending email notification to landlord:",e);let t={recipientEmail:e,recipientName:"Property Owner",subject:"New Move-out Walkthrough Report Shared",message:"A new move-out walkthrough report has been shared with you for property at ".concat(N.address,". You can view the report by clicking the button below."),status:"custom",reportId:i,reportUuid:a};await h.E.reports.sendNotification(i,t)}else console.log("No landlord email found to send notification");o.push("/reports/share-success?id=".concat(i,"&uuid=").concat(a))}else{let e=n[0];o.push("/reports/share-success?id=".concat(e.id,"&uuid=").concat(e.uuid))}}catch(e){console.error("Error creating or sending report:",e),p.Am.error("Failed to create or send the report")}finally{x(!1)}};return y&&s?(0,r.jsxs)("div",{className:"relative flex flex-col w-full min-h-screen bg-[#FBF5DA] font-['Nunito']",children:[(0,r.jsxs)(d(),{children:[(0,r.jsx)("title",{className:"jsx-dd2c7e9555c8d82a",children:"Move-Out Summary - tenantli"}),(0,r.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover",className:"jsx-dd2c7e9555c8d82a"}),(0,r.jsx)("meta",{name:"theme-color",content:"#FBF5DA",className:"jsx-dd2c7e9555c8d82a"}),(0,r.jsx)("meta",{name:"apple-mobile-web-app-capable",content:"yes",className:"jsx-dd2c7e9555c8d82a"}),(0,r.jsx)("meta",{name:"apple-mobile-web-app-status-bar-style",content:"default",className:"jsx-dd2c7e9555c8d82a"}),(0,r.jsx)("meta",{name:"mobile-web-app-capable",content:"yes",className:"jsx-dd2c7e9555c8d82a"}),(0,r.jsx)(n(),{id:"dd2c7e9555c8d82a",children:'body{background-color:#FBF5DA;overflow-x:hidden;position:fixed;width:100%;height:100%;margin:0;padding:0;font-family:"Nunito",sans-serif}#__next{height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.safe-area-top{padding-top:env(safe-area-inset-top,40px)}.safe-area-bottom{padding-bottom:env(safe-area-inset-bottom,20px)}@supports(padding:max(0px)){.safe-area-top{padding-top:max(env(safe-area-inset-top),40px)}.safe-area-bottom{padding-bottom:max(env(safe-area-inset-bottom),20px)}}*{-webkit-tap-highlight-color:transparent}'})]}),(0,r.jsxs)("div",{className:"fixed top-0 left-0 right-0 z-50",children:[(0,r.jsx)("div",{className:"h-[40px] safe-area-top bg-[#FBF5DA]"}),(0,r.jsx)("div",{className:"h-[65px] bg-[#FBF5DA] shadow-sm",children:(0,r.jsxs)("div",{className:"flex items-center justify-center relative h-full px-4",children:[(0,r.jsx)(u(),{href:"/move-out/rooms?propertyId=".concat(s),className:"absolute left-4 p-2 hover:bg-black/5 rounded-lg transition-colors duration-200","aria-label":"Go back",children:(0,r.jsx)(f,{})}),(0,r.jsx)("h1",{className:"text-[18px] font-semibold text-[#0B1420]",children:"Move-Out Summary"})]})})]}),(0,r.jsx)("div",{className:"flex flex-col min-h-screen pt-[105px] pb-[100px]",children:(0,r.jsx)("div",{className:"flex-1 px-4 py-5",children:(0,r.jsx)("div",{className:"max-w-[400px] mx-auto sm:max-w-2xl",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-[#D1E7D5] overflow-hidden",children:[(0,r.jsxs)("div",{className:"divide-y divide-[#ECF0F5]",children:[(0,r.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between hover:bg-gray-50 transition-colors duration-200",children:[(0,r.jsx)("span",{className:"text-sm text-[#0B1420]",children:"Tenant"}),(0,r.jsx)("span",{className:"text-sm font-bold text-[#1C2C40]",children:(null==w?void 0:w.name)||(null==e?void 0:e.name)||""})]}),(0,r.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between hover:bg-gray-50 transition-colors duration-200",children:[(0,r.jsx)("span",{className:"text-sm text-[#0B1420] min-w-[100px]",children:"Address"}),(0,r.jsx)("span",{className:"text-sm font-bold text-[#1C2C40] text-right flex-1 ml-4",children:N.address&&"Not specified"!==N.address?N.address:"Not specified"})]}),(0,r.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between hover:bg-gray-50 transition-colors duration-200",children:[(0,r.jsx)("span",{className:"text-sm text-[#0B1420] min-w-[100px]",children:"Lease Duration"}),(0,r.jsx)("span",{className:"text-sm font-bold text-[#1C2C40] text-right flex-1 ml-4",children:N.lease_duration&&"null"!==N.lease_duration?"".concat(N.lease_duration," ").concat(N.lease_duration_type||"months"):"Not specified"})]}),(0,r.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between hover:bg-gray-50 transition-colors duration-200",children:[(0,r.jsx)("span",{className:"text-sm text-[#0B1420] min-w-[100px]",children:"Move out Date"}),(0,r.jsx)("span",{className:"text-sm font-bold text-[#1C2C40] text-right flex-1 ml-4",children:(e=>{if(!e)return"Not specified";try{let t=new Date(e);if(isNaN(t.getTime()))return console.error("Invalid date:",e),"Not specified";return t.toLocaleDateString("en-US",{day:"2-digit",month:"2-digit",year:"numeric"}).replace(/\//g,".")}catch(e){return console.error("Error formatting date:",e),"Not specified"}})(N.contract_end_date)})]}),(0,r.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between hover:bg-gray-50 transition-colors duration-200",children:[(0,r.jsx)("span",{className:"text-sm text-[#0B1420] min-w-[100px]",children:"Deposit Amount"}),(0,r.jsx)("span",{className:"text-sm font-bold text-[#1C2C40] text-right flex-1 ml-4",children:N.deposit_amount&&"null"!==N.deposit_amount?(e=>{if(!e&&0!==e)return"Not specified";try{let t=parseFloat(e);if(isNaN(t))return console.error("Invalid currency amount:",e),"Not specified";return"$".concat(t.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,","))}catch(e){return console.error("Error formatting currency:",e),"Not specified"}})(N.deposit_amount):"Not specified"})]}),(0,r.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between hover:bg-gray-50 transition-colors duration-200",children:[(0,r.jsx)("span",{className:"text-sm text-[#0B1420]",children:"Landlord Mail"}),(0,r.jsx)("span",{className:"text-sm font-bold text-[#1C2C40] truncate ml-4",children:N.landlord_email||(null==C?void 0:C.email)||"Not provided"})]}),(0,r.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between hover:bg-gray-50 transition-colors duration-200",children:[(0,r.jsx)("span",{className:"text-sm text-[#0B1420]",children:"Landlord Phone"}),(0,r.jsx)("span",{className:"text-sm font-bold text-[#1C2C40]",children:N.landlord_phone||(null==C?void 0:C.phone)||"Not provided"})]})]}),O.length>0&&(0,r.jsx)("div",{className:"mt-4 mb-2 px-4",children:(0,r.jsx)("h2",{className:"text-base font-semibold text-[#0B1420] mb-3",children:"Rooms"})}),O.length>0&&O.map((e,t)=>{let n=e.roomId||e.id,i=e.roomName||e.name||e.type||e.roomType||"Room ".concat(t+1),a=e.roomType||e.type||"other",l=e.moveOutCompleted||e.moveOutPhotoCount>0||e.moveOutNotes&&e.moveOutNotes.length>0;return console.log("[Summary] Room: ".concat(i,", moveOutCompleted: ").concat(e.moveOutCompleted,", moveOutPhotoCount: ").concat(e.moveOutPhotoCount||I(n),", moveOutNotes: ").concat(z(e))),(0,r.jsxs)("div",{className:"px-4 py-3 flex items-start justify-between cursor-pointer hover:bg-gray-50 transition-colors duration-200 border-t border-[#ECF0F5] first:border-t-0",onClick:()=>{o.push({pathname:"/move-out/room",query:{propertyId:s,roomId:n,roomName:i,roomType:a,returnUrl:"/move-out/summary?propertyId=".concat(s).concat(_?"&from=walkthrough":""),isReport:_?"true":"false",readOnly:_?"true":"false"}})},children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[l&&(0,r.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("circle",{cx:"8",cy:"8",r:"8",fill:"#1C2C40"}),(0,r.jsx)("path",{d:"M6.66667 8.66667L7.33333 9.33333L9.33333 7.33333",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),(0,r.jsx)("span",{className:"text-sm font-semibold text-[#0B1420]",children:i}),z(e)>0&&(0,r.jsxs)("span",{className:"text-xs text-[#515964]",children:["(",z(e)," ",1===z(e)?"item":"items"," noted)"]}),0===z(e)&&(0,r.jsx)("span",{className:"text-xs text-[#515964]",children:"(No Notes)"})]}),I(n)>0&&(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,r.jsx)("div",{className:"relative h-6 z-10",children:(0,r.jsx)("div",{className:"flex -space-x-2",children:[...Array(Math.min(4,I(n)||0))].map((e,t)=>{let o=null;try{var s,i,a,l,d,c;((null===(a=R[n])||void 0===a?void 0:null===(i=a.photos)||void 0===i?void 0:null===(s=i[t])||void 0===s?void 0:s.url)||(null===(c=R[n])||void 0===c?void 0:null===(d=c.photos)||void 0===d?void 0:null===(l=d[t])||void 0===l?void 0:l.src))&&(o=R[n].photos[t].url||R[n].photos[t].src)}catch(e){console.error("Error getting photo URL for room ".concat(n,":"),e)}return(0,r.jsxs)("div",{className:"relative w-6 h-6 bg-gray-200 border-2 border-white rounded-full overflow-hidden shadow-sm",style:{backgroundImage:o?"url(".concat(o,")"):"none",backgroundSize:"cover",backgroundPosition:"center",zIndex:10-t},children:[!o&&(0,r.jsx)("div",{className:"flex items-center justify-center w-full h-full bg-gray-200",children:(0,r.jsxs)("svg",{width:"12",height:"12",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{d:"M6 8C7.10457 8 8 7.10457 8 6C8 4.89543 7.10457 4 6 4C4.89543 4 4 4.89543 4 6C4 7.10457 4.89543 8 6 8Z",fill:"#A3ADB8"}),(0,r.jsx)("path",{d:"M9.33333 2H6.66667C3.33333 2 2 3.33333 2 6.66667V9.33333C2 12.6667 3.33333 14 6.66667 14H9.33333C12.6667 14 14 12.6667 14 9.33333V6.66667C14 3.33333 12.6667 2 9.33333 2ZM12.3067 9.63333L10.2867 7.22C10.08 6.96667 9.82667 6.96667 9.62 7.22L7.88667 9.3C7.68667 9.55 7.43333 9.55 7.23333 9.3L6.65333 8.58C6.45333 8.33667 6.20667 8.34333 6.01333 8.59333L3.81333 11.4767C3.57333 11.7933 3.69333 12.06 4.10667 12.06H11.8867C12.3 12.06 12.4267 11.7933 12.3067 9.63333Z",fill:"#A3ADB8"})]})}),I(n)>4&&3===t&&(0,r.jsxs)("div",{className:"absolute inset-0 flex items-center justify-center bg-[#1C2C40] text-white text-[10px] font-bold",children:["+",I(n)-3]})]},t)})})}),(0,r.jsxs)("span",{className:"text-xs text-[#515964]",children:["(",I(n)," ",1===I(n)?"Photo":"Photos",")"]})]})]}),(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsx)(v,{})})]},n)})]})})})}),(0,r.jsx)("div",{className:"fixed bottom-0 left-0 right-0 px-5 py-4 bg-[#FBF5DA] shadow-inner safe-area-bottom z-50",children:(0,r.jsx)("div",{className:"max-w-[400px] mx-auto sm:max-w-2xl",children:(0,r.jsx)("form",{onSubmit:e=>{e.preventDefault(),_||B()},children:(0,r.jsx)("button",{type:"submit",disabled:c||_,className:"w-full h-14 bg-[#1C2C40] text-white font-semibold rounded-2xl shadow-sm hover:bg-[#283c56] disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 touch-manipulation focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#1C2C40]","aria-label":_?"Move-out report already shared":c?"Creating move-out report...":"Create & Share Report",children:_?"Move-out Report Already Shared":c?"Creating Report...":"Create & Share Report"})})})})]}):(0,r.jsxs)("div",{className:"flex flex-col w-full min-h-screen bg-[#FBF5DA]",children:[(0,r.jsxs)(d(),{children:[(0,r.jsx)("title",{children:"Loading - tenantli"}),(0,r.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"}),(0,r.jsx)("meta",{name:"theme-color",content:"#FBF5DA"})]}),(0,r.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#1C2C40]"})})]})}},1479:function(){}},function(e){e.O(0,[1664,2888,9774,179],function(){return e(e.s=5602)}),_N_E=e.O()}]);