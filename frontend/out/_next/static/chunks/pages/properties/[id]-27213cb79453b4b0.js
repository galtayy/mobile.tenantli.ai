(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8161],{5706:function(o,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/properties/[id]",function(){return t(7573)}])},7573:function(o,e,t){"use strict";t.r(e),t.d(e,{default:function(){return d}});var r=t(5893),a=t(7294),n=t(1163),s=t(1491),i=t(610);function d(){let o=(0,n.useRouter)(),{id:e}=o.query,{user:t,loading:d}=(0,s.a)(),[l,p]=(0,a.useState)(!0),c=(o,e,t)=>{if(!o.address||!o.deposit_amount||!o.lease_duration)return console.log("Property details missing:",{address:o.address,deposit:o.deposit_amount,lease:o.lease_duration}),!1;if(!o.landlord_email&&!o.landlord_phone)return console.log("Landlord contact info missing"),{needsLandlordInfo:!0};if(!e||0===e.length)return console.log("No rooms found"),!1;let r=!1;for(let o of e){let e=o.id||o.roomId;if((o.photoCount||(t[e]&&t[e].photos?t[e].photos.length:0))>0){r=!0;break}}return!!r||(console.log("No rooms with photos found"),!1)};return(0,a.useEffect)(()=>{(async()=>{if(e&&!d){if(!t){o.push("/login");return}try{let t=(await i.E.properties.getById(e)).data,r=(await i.E.properties.getRooms(e)).data||[],a=await i.E.photos.getByProperty(e),n={};a.data&&(a.data.photosByRoom?n=a.data.photosByRoom:Array.isArray(a.data)?a.data.forEach(o=>{o.room_id&&(n[o.room_id]||(n[o.room_id]={photos:[]}),n[o.room_id].photos.push(o))}):a.data.photos&&Array.isArray(a.data.photos)?a.data.photos.forEach(o=>{o.room_id&&(n[o.room_id]||(n[o.room_id]={photos:[]}),n[o.room_id].photos.push(o))}):console.warn("Photos response format not recognized:",a.data));let s=await i.E.reports.getByProperty(e),d=s.data&&s.data.length>0,l=c(t,r,n);l&&l.needsLandlordInfo?(console.log("Redirecting to landlord update page - landlord info missing"),o.replace("/properties/".concat(e,"/landlord-update"))):!0===l&&d?(console.log("Redirecting to new details page - all property info is complete"),o.replace("/properties/details?propertyId=".concat(e))):(console.log("Redirecting to regular property page - some property info is missing"),o.replace("/properties/".concat(e,"/index-new")))}catch(t){console.error("Error checking property status:",t),o.replace("/properties/".concat(e,"/index-new"))}finally{p(!1)}}})()},[e,t,d,o]),(0,r.jsx)("div",{className:"flex justify-center items-center h-screen bg-[#FBF5DA]",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#1C2C40]"})})}}},function(o){o.O(0,[2888,9774,179],function(){return o(o.s=5706)}),_N_E=o.O()}]);