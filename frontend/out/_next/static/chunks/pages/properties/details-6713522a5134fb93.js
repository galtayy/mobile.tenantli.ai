(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9823],{5099:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/properties/details",function(){return s(6421)}])},6421:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return v}});var l=s(5893),n=s(7294),i=s(1163),r=s(9008),a=s.n(r),o=s(1664),c=s.n(o),d=s(2920),x=s(1491),m=s(610);let p=()=>(0,l.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{d:"M15 19.9201L8.47997 13.4001C7.70997 12.6301 7.70997 11.3701 8.47997 10.6001L15 4.08008",stroke:"#292D32",strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"})}),h=()=>(0,l.jsx)("img",{src:"/images/home.svg",alt:"Property",width:"45",height:"45",className:"object-contain"}),u=()=>(0,l.jsx)("img",{src:"/images/lease.svg",alt:"Calendar",width:"45",height:"45",className:"object-contain"}),f=()=>(0,l.jsx)("img",{src:"/images/completed.svg",alt:"Activity",width:"45",height:"45",className:"object-contain"}),j=()=>(0,l.jsx)("img",{src:"/images/completed.svg",alt:"Walkthrough",width:"45",height:"45",className:"object-contain"});function v(){var e,t;let{user:s,loading:r}=(0,x.a)(),o=(0,i.useRouter)(),[v,g]=(0,n.useState)(null),[b,w]=(0,n.useState)([]),[y,N]=(0,n.useState)(!0),[k,_]=(0,n.useState)(!1),{propertyId:F,id:D}=o.query;(0,n.useEffect)(()=>{_(!0)},[]),(0,n.useEffect)(()=>{if(!r){if(!s){o.push("/login");return}(async()=>{try{console.log("URL query params:",o.query);let e=o.query.propertyId,t=o.query.id,s=localStorage.getItem("lastSharedPropertyId");console.log("Olası ID kaynakları:",{"Query propertyId":e,"Query id":t,"localStorage ID":s});let l=e||t||s;if(console.log("Kullanılan m\xfclk ID:",l),!l){console.error("M\xfclk ID bulunamadı! M\xfclk listesine y\xf6nlendiriliyor..."),o.push("/properties");return}console.log("M\xfclk verisi ".concat(l," ID'si ile y\xfckleniyor..."));let n=(await m.E.properties.getById(l)).data;if(console.log("M\xfclk verisi y\xfcklendi:",n),!n){console.error("M\xfclk verisi bulunamadı!"),d.Am.error("M\xfclk bilgileri y\xfcklenemedi."),o.push("/properties");return}g(n);try{let e=await m.E.reports.getByProperty(l);w(e.data||[])}catch(e){console.error("Error loading property reports:",e)}N(!1)}catch(e){console.error("Error loading property data:",e),N(!1),o.push("/properties")}})()}},[s,r,o,F,D]);let E=e=>{if(!e)return"Not specified";let t=new Date(e);return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(t)};if(y)return(0,l.jsx)("div",{className:"flex justify-center items-center h-screen bg-[#FBF5DA]",children:(0,l.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#1C2C40]"})});let I=(()=>{if(!v||!v.contract_end_date)return null;let e=Math.ceil((new Date(v.contract_end_date)-new Date)/864e5);return e>0?e:0})();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(a(),{children:[(0,l.jsx)("title",{children:"Property Details - tenantli"}),(0,l.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"}),(0,l.jsx)("meta",{name:"theme-color",content:"#FBF5DA"}),(0,l.jsx)("meta",{name:"apple-mobile-web-app-capable",content:"yes"}),(0,l.jsx)("meta",{name:"apple-mobile-web-app-status-bar-style",content:"default"}),(0,l.jsx)("meta",{name:"format-detection",content:"telephone=no"}),(0,l.jsx)("meta",{name:"mobile-web-app-capable",content:"yes"}),(0,l.jsx)("meta",{name:"description",content:"View property details and manage your rental"}),(0,l.jsx)("link",{rel:"manifest",href:"/manifest.json"}),(0,l.jsx)("link",{rel:"apple-touch-icon",href:"/icons/apple-touch-icon.png"}),(0,l.jsx)("link",{rel:"stylesheet",href:"/styles/modern/theme.css"}),(0,l.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;500;600;700&display=swap",rel:"stylesheet"}),(0,l.jsx)("style",{children:"\n          body, html {\n            background-color: #FBF5DA;\n            min-height: 100vh;\n            margin: 0;\n            padding: 0;\n          }\n          @media (max-width: 640px) {\n            .mobile-full-height {\n              min-height: calc(100vh - env(safe-area-inset-bottom));\n            }\n          }\n        "})]}),(0,l.jsx)("div",{className:"fixed inset-0 bg-[#FBF5DA]"}),(0,l.jsxs)("div",{className:"relative min-h-screen mobile-full-height w-full font-['Nunito'] overflow-hidden",children:[(0,l.jsx)("div",{className:"h-10 w-full sm:h-0"}),(0,l.jsxs)("div",{className:"absolute w-full h-[65px] left-0 top-[40px] sm:top-8 flex flex-row justify-center items-center px-4",children:[(0,l.jsx)(c(),{href:"/",className:"absolute left-[20px] top-1/2 -translate-y-1/2",children:(0,l.jsx)(p,{})}),(0,l.jsx)("h1",{className:"font-semibold text-[18px] text-center text-[#0B1420]",children:"Property Details"})]}),(0,l.jsxs)("div",{className:"w-full flex flex-col items-center px-[5%] pt-[121px] sm:pt-[100px]",children:[(0,l.jsxs)("div",{className:"flex flex-row items-start justify-between w-full mb-4 max-w-[420px]",children:[(0,l.jsxs)("div",{className:"font-normal text-[20px] leading-[27px] text-[#0B1420]",children:["Welcome Back, ",k&&(null==s?void 0:s.name)?s.name.split(" ")[0]:"User"]}),null!==I&&(0,l.jsx)("div",{className:"flex justify-center items-center py-1 px-3 bg-[#F6E7A5] rounded-[32px]",children:(0,l.jsxs)("span",{className:"font-semibold text-[14px] leading-[19px] text-[#946500]",children:[I," Day",1!==I?"s":""," Left"]})})]}),(0,l.jsx)("div",{className:"w-full mb-4 max-w-[420px]",onClick:()=>o.push("/properties/".concat(null==v?void 0:v.id,"/edit")),children:(0,l.jsx)("div",{className:"w-full p-4 bg-white border border-[#F6FEF7] rounded-[16px] relative cursor-pointer hover:bg-gray-50 transition-colors",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"mr-4 w-[45px] h-[45px] flex items-center justify-center",children:(0,l.jsx)(h,{})}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("div",{className:"font-bold text-[14px] leading-[19px] text-[#2E3642] mb-1",children:(null==v?void 0:v.description)||"Address not available"}),(0,l.jsx)("div",{className:"font-normal text-[14px] leading-[19px] text-[#515964]",children:(null==v?void 0:v.unit_number)?"Unit ".concat(null==v?void 0:v.unit_number):""})]})]})})}),(0,l.jsx)("div",{className:"w-full mb-6 max-w-[420px]",onClick:()=>o.push("/properties/".concat(null==v?void 0:v.id,"/lease-details")),children:(0,l.jsx)("div",{className:"w-full p-4 bg-white border border-[#F6FEF7] rounded-[16px] relative cursor-pointer hover:bg-gray-50 transition-colors",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"mr-4 w-[45px] h-[45px] flex items-center justify-center",children:(0,l.jsx)(u,{})}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("div",{className:"font-bold text-[14px] leading-[19px] text-[#2E3642] mb-1",children:"Lease Details"}),(0,l.jsxs)("div",{className:"font-normal text-[14px] leading-[19px] text-[#515964]",children:[(null==v?void 0:v.lease_duration)||"0"," ",(null==v?void 0:v.lease_duration_type)||"months"," - $",(null==v?void 0:v.deposit_amount)||"0"]}),(0,l.jsxs)("div",{className:"font-normal text-[14px] leading-[19px] text-[#515964] mt-1",children:["Move out: ",E(null==v?void 0:v.contract_end_date)]})]})]})})}),(0,l.jsxs)("div",{className:"w-full mb-4 max-w-[420px]",children:[(0,l.jsx)("div",{className:"flex justify-between items-center mb-3",children:(0,l.jsx)("h2",{className:"font-bold text-[16px] text-[#0B1420]",children:"Recent Activity"})}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsx)("div",{className:"w-full bg-white border border-[#F6FEF7] rounded-[16px] p-4 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>o.push("/properties/".concat(null==v?void 0:v.id,"/summary")),children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"mr-4 w-[45px] h-[45px] flex items-center justify-center",children:(0,l.jsx)(j,{})}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("div",{className:"font-bold text-[14px] leading-[19px] text-[#2E3642] mb-1",children:"Walkthrough Completed"}),(0,l.jsx)("div",{className:"font-normal text-[14px] leading-[19px] text-[#515964]",children:E((null===(e=b[0])||void 0===e?void 0:e.created_at)||new Date)})]})]})}),b.length>1&&(0,l.jsx)("div",{className:"w-full bg-white border border-[#F6FEF7] rounded-[16px] p-4 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>{var e;return(null===(e=b[1])||void 0===e?void 0:e.id)&&o.push("/reports/".concat(b[1].id))},children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"mr-4 w-[45px] h-[45px] flex items-center justify-center",children:(0,l.jsx)(f,{})}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("div",{className:"font-bold text-[14px] leading-[19px] text-[#2E3642] mb-1",children:"Logging Issue"}),(0,l.jsx)("div",{className:"font-normal text-[14px] leading-[19px] text-[#515964]",children:E((null===(t=b[1])||void 0===t?void 0:t.created_at)||new Date)})]})]})})]})]})]}),(0,l.jsx)("div",{className:"pb-[120px]"})]})]})}}},function(e){e.O(0,[1664,2888,9774,179],function(){return e(e.s=5099)}),_N_E=e.O()}]);