(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8349],{6024:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/properties/[id]/test-render-rooms",function(){return s(5223)}])},5223:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return n}});var t=s(5893),l=s(7294),o=s(1163),r=s(610);function n(){let{id:e}=(0,o.useRouter)().query,[a,s]=(0,l.useState)({}),[n,c]=(0,l.useState)([]),[d,i]=(0,l.useState)(!0),[u,m]=(0,l.useState)(null);(0,l.useEffect)(()=>{e&&h()},[e]);let h=async()=>{try{i(!0),m(null),console.log("Y\xfckleniyor: M\xfclk ID=",e);let a=await r.E.photos.getByProperty(e);if(console.log("Fotoğraf yanıtı:",a.data),a.data&&a.data.photosByRoom){s(a.data.photosByRoom);let e=[];Object.keys(a.data.photosByRoom).forEach(s=>{let t=a.data.photosByRoom[s].photos||[];t.length>0&&e.push({id:s,name:"Oda "+s.split("_").pop().substring(0,3),photoCount:t.length,photos:t})}),console.log("Oluşturulan odalar:",e),c(e)}else console.error("Fotoğraflar bulunamadı veya yanlış formatta"),m("Fotoğraflar bulunamadı veya yanlış formatta")}catch(e){console.error("Veri y\xfckleme hatası:",e),m("Veri y\xfckleme hatası: "+e.message)}finally{i(!1)}};return d?(0,t.jsx)("div",{className:"p-8 text-center",children:"Y\xfckleniyor..."}):u?(0,t.jsxs)("div",{className:"p-8 text-center",children:[(0,t.jsxs)("div",{className:"text-red-500 mb-4",children:["Hata: ",u]}),(0,t.jsx)("button",{className:"bg-blue-500 text-white px-4 py-2 rounded",onClick:h,children:"Yeniden Dene"})]}):(0,t.jsxs)("div",{className:"p-8",children:[(0,t.jsxs)("h1",{className:"text-2xl font-bold mb-6",children:["Oda Test Sayfası - M\xfclk ID: ",e]}),(0,t.jsxs)("h2",{className:"text-xl font-semibold mb-4",children:["Odalar (",n.length,")"]}),n.length>0?(0,t.jsx)("div",{className:"space-y-4",children:n.map(e=>(0,t.jsxs)("div",{className:"border p-4 rounded",children:[(0,t.jsx)("h3",{className:"font-bold",children:e.name}),(0,t.jsxs)("div",{className:"text-sm",children:["ID: ",e.id]}),(0,t.jsxs)("div",{className:"text-sm mb-2",children:["Fotoğraf sayısı: ",e.photoCount]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:e.photos.slice(0,4).map((e,a)=>(0,t.jsx)("div",{className:"w-24 h-24 bg-gray-200 relative",children:(0,t.jsx)("img",{src:e.url&&e.url.startsWith("/uploads/")?"".concat(r.E.getBaseUrl()).concat(e.url):e.url||"",alt:"Oda fotoğrafı ".concat(a+1),className:"w-full h-full object-cover"})},a))})]},e.id))}):(0,t.jsx)("div",{className:"bg-yellow-100 p-4 rounded",children:"Hi\xe7 oda bulunmadı. Fotoğraf verileri mevcut ancak odalar oluşturulamadı."}),(0,t.jsxs)("div",{className:"mt-8",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Ham Veriler"}),(0,t.jsxs)("div",{className:"bg-gray-100 p-4 rounded overflow-auto max-h-[500px]",children:[(0,t.jsx)("h3",{className:"font-bold mb-2",children:"Oda Fotoğrafları"}),(0,t.jsx)("pre",{className:"text-xs",children:JSON.stringify(a,null,2)})]})]})]})}}},function(e){e.O(0,[2888,9774,179],function(){return e(e.s=6024)}),_N_E=e.O()}]);